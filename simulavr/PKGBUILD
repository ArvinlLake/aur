# Maintainer:  Eugen Zagorodniy <e dot zagorodniy at gmail dot com>
# Contributor: Laszlo Papp <djszapi2 at gmail com>
# Contributor: Gerardo Exequiel Pozzi <vmlinuz386@yahoo.com.ar>
# Contributor: Christoph Siegenthaler <csi@gmx.ch>
# Contributor: 4javier <4javiereg4ATgmailDOTcom>
# Contributor: Matti Niemenmaa <matti.niemenmaa+aur, domain iki.fi>

pkgname=simulavr
pkgver=1.0.0
pkgrel=1
pkgdesc="Simulator for the Atmel AVR family of 8-bit risc microcontrollers"
url="http://savannah.nongnu.org/projects/simulavr"
arch=('i686' 'x86_64')
license=('GPL2')
depends=('ncurses')
makedepends=('avr-libc')
options=('!strip')
source=(http://mirror.lihnidos.org/GNU/savannah/simulavr/${pkgname}-${pkgver}.tar.gz)
md5sums=('9482c7b221b1056932b7190006aab806')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    # We need to pass -lz explicitly
    sed -i 2iLIBZ_FLAGS=-lz configure
    # Avoid error
    # /usr/bin/avr-ld: unrecognized option '--hash-style=gnu'
    unset LDFLAGS
    ./configure --prefix=/usr --disable-python --disable-tcl
    make
}

package() {
    cd ${srcdir}/${pkgname}-${pkgver}
    make install DESTDIR=$pkgdir || return 1
}

