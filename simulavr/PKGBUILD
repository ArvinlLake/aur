# Maintainer:  Eugen Zagorodniy <e dot zagorodniy at gmail dot com>
# Contributor: Laszlo Papp <djszapi2 at gmail com>
# Contributor: Gerardo Exequiel Pozzi <vmlinuz386@yahoo.com.ar>
# Contributor: Christoph Siegenthaler <csi@gmx.ch>

pkgname=simulavr
pkgver=0.1.2.7
pkgrel=1
pkgdesc="Simulator for the Atmel AVR family of 8-bit risc microcontrollers"
url="http://savannah.nongnu.org/projects/simulavr"
arch=('i686' 'x86_64')
license=('GPL2')
depends=('ncurses')
makedepends=('avr-libc')
source=(
http://mirror.lihnidos.org/GNU/savannah/simulavr/${pkgname}-${pkgver}.tar.gz
warnings.patch
)
md5sums=('bba99c7e550db5e217aab7f5537d179c'
         '94698745135a8b6228d99936fea54054')

build() {
    cd ${srcdir}/${pkgname}-${pkgver}
    patch -p1 < ${srcdir}/warnings.patch
    # Avoid error
    # /usr/bin/avr-ld: unrecognized option '--hash-style=gnu'
    unset LDFLAGS
    ./configure --prefix=/usr 
    make 
}

package() {
    cd ${srcdir}/${pkgname}-${pkgver}

    make install DESTDIR=$pkgdir || return 1
}
